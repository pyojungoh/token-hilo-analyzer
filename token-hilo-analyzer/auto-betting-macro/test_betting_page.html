<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>매크로 배팅 테스트</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            max-width: 560px;
            margin: 24px auto;
            padding: 16px;
            background: #1a1a2e;
            color: #eee;
        }
        h1 { font-size: 1.2rem; margin-bottom: 16px; color: #81c784; }
        .row { margin-bottom: 16px; }
        label { display: block; margin-bottom: 6px; color: #aaa; font-size: 0.9rem; }
        input[type="number"], input[type="text"] {
            width: 100%;
            padding: 10px 12px;
            font-size: 1rem;
            border: 2px solid #333;
            border-radius: 8px;
            background: #16213e;
            color: #fff;
        }
        input:focus { outline: none; border-color: #81c784; }
        .btns { display: flex; gap: 12px; margin-top: 20px; }
        .btn {
            flex: 1;
            padding: 14px 20px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .btn:active { transform: scale(0.98); }
        .btn-red {
            background: #e53935;
            color: #fff;
        }
        .btn-black {
            background: #212121;
            color: #fff;
        }
        .info-bar {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            padding: 10px 12px;
            background: #0f0f1a;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        .info-bar span { color: #aaa; }
        .info-bar strong { color: #81c784; }
        .info-bar .cumulative { font-weight: bold; font-size: 1rem; }
        .info-bar .cumulative.plus { color: #81c784; }
        .info-bar .cumulative.minus { color: #e57373; }
        .bet-table-wrap {
            margin-top: 16px;
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #333;
            background: #0f0f1a;
        }
        .bet-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        .bet-table th, .bet-table td {
            padding: 8px 10px;
            border: 1px solid #333;
            text-align: center;
        }
        .bet-table th {
            background: #333;
            color: #81c784;
            font-weight: bold;
        }
        .bet-table td:first-child { color: #ccc; }
        .bet-table .pick-red { background: #b71c1c; color: #fff; }
        .bet-table .pick-black { background: #212121; color: #fff; }
        .bet-table .result-red { background: #b71c1c; color: #fff; }
        .bet-table .result-black { background: #212121; color: #fff; }
        .bet-table .win { color: #81c784; font-weight: 600; }
        .bet-table .lose { color: #e57373; font-weight: 600; }
        .bet-table .profit-plus { color: #81c784; }
        .bet-table .profit-minus { color: #e57373; }
        .log {
            margin-top: 24px;
            padding: 12px;
            background: #0f0f1a;
            border-radius: 8px;
            font-family: Consolas, monospace;
            font-size: 0.85rem;
            min-height: 100px;
            max-height: 180px;
            overflow-y: auto;
        }
        .log div { margin-bottom: 4px; }
        .log .time { color: #666; }
        .log .amount { color: #81c784; }
        .log .red { color: #e57373; }
        .log .black { color: #90a4ae; }
    </style>
</head>
<body>
    <h1>매크로 배팅 테스트 페이지</h1>
    <p style="color:#888;font-size:0.85rem;margin-bottom:16px;">
        매크로에서 이 페이지 URL을 넣고, 금액 칸 / RED / BLACK 좌표를 잡은 뒤 시작하면 동작을 확인할 수 있습니다.
    </p>

    <div class="info-bar">
        <span>시작금액: <strong>1,000,000원</strong></span>
        <span>배당: <strong>1.97</strong></span>
        <span>현재 누적: <strong class="cumulative" id="current-cumulative">1,000,000</strong>원</span>
    </div>

    <div class="row">
        <label for="amount">금액 입력 칸</label>
        <input type="text" id="amount" placeholder="매크로가 여기에 금액을 넣습니다" value="">
    </div>

    <div class="row btns">
        <button type="button" class="btn btn-red" id="btn-red">RED</button>
        <button type="button" class="btn btn-black" id="btn-black">BLACK</button>
    </div>

    <div class="row">
        <label>배팅 내역</label>
        <div class="bet-table-wrap">
            <table class="bet-table" id="bet-table">
                <thead>
                    <tr><th>회차</th><th>PICK</th><th>결과</th><th>배팅금액</th><th>승/패</th><th>수익</th><th>누적</th></tr>
                </thead>
                <tbody id="bet-tbody">
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <label>동작 로그 (금액 입력 / 클릭 기록)</label>
        <div class="log" id="log"></div>
    </div>

    <script>
        (function() {
            var ODDS = 1.97;
            var START_CAPITAL = 1000000;
            var round = 0;
            var cumulative = START_CAPITAL;

            var logEl = document.getElementById('log');
            var amountEl = document.getElementById('amount');
            var btnRed = document.getElementById('btn-red');
            var btnBlack = document.getElementById('btn-black');
            var tbody = document.getElementById('bet-tbody');
            var cumulativeEl = document.getElementById('current-cumulative');

            function fmtNum(n) {
                return n >= 0 ? '+' + n.toLocaleString() : n.toLocaleString();
            }
            function fmtAmount(n) {
                return (n || 0).toLocaleString();
            }

            function addLog(msg, cls) {
                var div = document.createElement('div');
                div.className = cls || '';
                div.innerHTML = '<span class="time">[' + new Date().toLocaleTimeString('ko-KR') + ']</span> ' + msg;
                logEl.appendChild(div);
                logEl.scrollTop = logEl.scrollHeight;
            }

            function recordBet(pick) {
                var amount = parseInt(amountEl.value.replace(/,/g, ''), 10) || 0;
                if (amount <= 0) {
                    addLog('금액을 입력한 뒤 RED/BLACK을 눌러주세요.', '');
                    return;
                }
                round += 1;
                var result = Math.random() < 0.5 ? 'RED' : 'BLACK';
                var win = (pick === result);
                var profit = win ? Math.floor(amount * (ODDS - 1)) : -amount;
                cumulative += profit;

                var tr = document.createElement('tr');
                tr.innerHTML =
                    '<td>' + round + '</td>' +
                    '<td class="pick-' + pick.toLowerCase() + '">' + pick + '</td>' +
                    '<td class="result-' + result.toLowerCase() + '">' + result + '</td>' +
                    '<td>' + fmtAmount(amount) + '</td>' +
                    '<td class="' + (win ? 'win' : 'lose') + '">' + (win ? '승' : '패') + '</td>' +
                    '<td class="' + (profit >= 0 ? 'profit-plus' : 'profit-minus') + '">' + fmtNum(profit) + '</td>' +
                    '<td>' + fmtAmount(cumulative) + '</td>';
                tbody.insertBefore(tr, tbody.firstChild);

                cumulativeEl.textContent = fmtAmount(cumulative);
                cumulativeEl.className = 'cumulative ' + (cumulative >= START_CAPITAL ? 'plus' : 'minus');
            }

            amountEl.addEventListener('input', function() {
                addLog('금액 입력: ' + amountEl.value, 'amount');
            });
            amountEl.addEventListener('focus', function() {
                addLog('금액 칸 포커스', '');
            });

            btnRed.addEventListener('click', function() {
                addLog('RED 버튼 클릭됨', 'red');
                recordBet('RED');
            });
            btnBlack.addEventListener('click', function() {
                addLog('BLACK 버튼 클릭됨', 'black');
                recordBet('BLACK');
            });

            addLog('테스트 페이지 로드됨. 시작금액 100만원, 배당 1.97. RED/BLACK 클릭 시 배팅 내역 표에 반영됩니다.', '');
        })();
    </script>
</body>
</html>
