# token-hilo-analyzer 프로젝트 규칙

- 코드 수정 후에는 **항상** 자동으로 **git add → commit → push**까지 진행한다. 푸시 누락 금지.
- 커밋 메시지는 변경 내용을 간단히 영어 또는 한글로 작성한다.

## 표시·로딩 (필수)
- **"아무것도 안 뜨는" 상황을 만들지 말 것.** 페이지 로딩 후 반드시 내용이 표시되어야 한다. 이 룰을 지키지 않으면 안 된다.
- 로딩·표시 관련 코드를 수정할 때 **불필요하게 자꾸 건드리지 말고**, 건드릴 경우 반드시 **JS 오류·ReferenceError 없이 화면이 뜨는지** 확인한다.
- `loadResults`·초기 로딩·표시 흐름을 건드릴 때는 **변수 스코프·정의 순서**를 확인하고, 정의되지 않은 변수 참조로 인한 ReferenceError가 나지 않게 한다.
- 변경 후 **로딩 → 상태 문구 → 카드/표/예측 픽 표시**가 정상 동작하는지 확인한다.

## 경기·예측 룰 (필수)
- **경기는 10초 경기**이다.
- 사용자는 **그 10초 안에 결과를 봐야** 예측을 할 수 있다.
- 따라서 데이터 갱신·API 응답·타이머 등은 **10초 안에 결과를 볼 수 있게** 맞춘다.
- **최근 30회차** 정보가 가장 많이 반영된다고 본다. 다음 회차 예측·전이 확률 해석 시 **최근 30회**를 우선 참고한다.
- **"승률 낮음·배팅 주의"** 판단은 **최근 30회** 기준 승률로 한다. 최근 30회 승률이 50% 이하일 때만 해당 문구를 표시한다. (전체 100회 승률이 아님)

## 정/꺽 그래프·픽 일치 (필수)
- **정/꺽 그래프와 예측 픽은 절대 다르게 나와서는 안 된다.** 같은 데이터·같은 회차 기준으로 항상 동일한 순서·동일한 결과가 표시되어야 한다.
- 결과 순서는 **gameID 기준 최신순(높은 ID = 최신)**으로 고정한다. API·병합·캐시 후에도 백엔드·프론트엔드 모두 이 순서로 정렬해 반환·표시한다.
- 정/꺽 그래프·픽 관련 코드 수정 시 **순서 정렬 로직을 제거하거나 바꾸지 말 것.** 새 데이터 소스·API를 쓸 때도 동일 정렬 규칙을 적용한다.

## 회차(gameID) 규칙 (필수)
- **비교·저장·최신 판단은 항상 전체 회차 숫자(gameID 전체)로 한다.** 예: 11416035, 11416052. 숫자가 클수록 최신이다.
- **뒤 3자리만으로 비교하면 안 된다.** 999 > 035 로 잘못 비교되면 035 회차가 999보다 최신인데도 999가 최신으로 처리된다. 따라서 정렬·중복 체크·예측 기록 비교 시 **전체 gameID(정수)** 를 사용한다.
- **상단 "이전회차"** 에는 **전체 회차 숫자**를 그대로 표시한다. (예: 이전회차: 11416052)
- **표(연승/연패 테이블, 예측 N회 등)** 에는 **뒤 3자리만** 표시한다. (예: 052, 035) 표시용으로만 `slice(-3)` 또는 동일 규칙을 적용한다.
- prediction_history·계산기 history의 `round` 필드는 **전체 회차 숫자**로 저장하고, 조회 시 `ORDER BY round_num DESC` 등 전체 값 기준 정렬을 유지한다.
